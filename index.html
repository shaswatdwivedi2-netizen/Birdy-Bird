<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Birdy Premium</title>

<style>
    body {
        margin: 0;
        background: linear-gradient(#6ec9ff, #ccecff);
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        font-family: Arial, sans-serif;
    }

    canvas {
        border: 4px solid #004;
        background: linear-gradient(#87ceeb, #bde0ff);
        border-radius: 10px;
        box-shadow: 0 0 20px #0004;
        image-rendering: pixelated;
    }

    #scoreBox {
        position: fixed;
        top: 20px;
        left: 20px;
        font-size: 26px;
        font-weight: bold;
        color: #003;
        text-shadow: 0 0 4px white;
    }
</style>
</head>
<body>

<div id="scoreBox">Score: <span id="sc">0</span></div>
<canvas id="game" width="420" height="600"></canvas>

<script>
const c = document.getElementById("game");
const ctx = c.getContext("2d");
const scEl = document.getElementById("sc");

const W = c.width, H = c.height;

// Load bird sprite
const birdImg = new Image();
birdImg.src = "bird.png";   // <-- put bird.png in same folder

// Audio (YOUR ABUSIVE CLIP HERE ðŸ˜‚)
const deathAudio = new Audio("death.mp3");

// Bird
let bird = {
    x: 100,
    y: H/2,
    vy: 0,
    width: 40,
    height: 32,
    rot: 0
};

let gravity = 0.4;
let jumpPower = -7;

// Pipes Array
let pipes = [];
let frame = 0;
let score = 0;
let running = true;

// RESET
function reset(){
    bird.y = H/2;
    bird.vy = 0;
    pipes = [];
    frame = 0;
    score = 0;
    scEl.textContent = "0";
    running = true;
}

// Create pipe with spikes
function addPipe(){
    const gap = 150;
    const topHeight = 80 + Math.random() * 260;

    pipes.push({
        x: W,
        top: topHeight,
        gap: gap,
        passed: false
    });
}

// Draw spikes
function drawSpikes(x, y, count, direction){
    ctx.fillStyle = "#146b12";
    let size = 16;
    for(let i = 0; i < count; i++){
        if(direction === "down"){
            ctx.beginPath();
            ctx.moveTo(x + i*size, y);
            ctx.lineTo(x + i*size + size/2, y + size);
            ctx.lineTo(x + i*size + size, y);
            ctx.fill();
        } else {
            ctx.beginPath();
            ctx.moveTo(x + i*size, y);
            ctx.lineTo(x + i*size + size/2, y - size);
            ctx.lineTo(x + i*size + size, y);
            ctx.fill();
        }
    }
}

// Collision check
function hits(pipe){
    let bx1 = bird.x, bx2 = bird.x + bird.width;
    let by1 = bird.y, by2 = bird.y + bird.height;

    // upper pipe
    if(bx2 > pipe.x && bx1 < pipe.x + 60 &&
       by1 < pipe.top) return true;

    // lower pipe
    if(bx2 > pipe.x && bx1 < pipe.x + 60 &&
       by2 > pipe.top + pipe.gap) return true;

    return false;
}

// Game over
function gameOver(){
    running = false;
    // Play your audio
    deathAudio.currentTime = 0;
    deathAudio.play().catch(()=>{});
}

// Main loop
function loop(){
    frame++;

    ctx.clearRect(0,0,W,H);

    // Add pipes automatically
    if(frame % 95 === 0) addPipe();

    // Draw & move pipes
    pipes.forEach((p, i) => {
        if(running) p.x -= 2.5;

        // Pipe body
        ctx.fillStyle = "#1fa025";

        // Top pipe
        ctx.fillRect(p.x, 0, 60, p.top);
        drawSpikes(p.x, p.top, 4, "down");

        // Bottom pipe
        ctx.fillRect(p.x, p.top + p.gap, 60, H - (p.top + p.gap));
        drawSpikes(p.x, p.top + p.gap, 4, "up");

        // Scoring
        if(!p.passed && p.x + 60 < bird.x){
            score++;
            scEl.textContent = score;
            p.passed = true;
        }

        // Remove old pipes
        if(p.x < -80) pipes.splice(i,1);

        // Collision
        if(running && hits(p)){
            gameOver();
        }
    });

    // Bird physics
    if(running){
        bird.vy += gravity;
        bird.y += bird.vy;
        
    } else {
        bird.vy += gravity;
        bird.y += bird.vy;
        
    }

    // Boundary die
    if(bird.y > H - bird.height || bird.y < 0){
        if(running) gameOver();
    }

    // Draw bird with rotation
    ctx.save();
    ctx.translate(bird.x + bird.width/2, bird.y + bird.height/2);
    ctx.rotate(bird.rot);
    ctx.drawImage(birdImg, -bird.width/2, -bird.height/2, bird.width, bird.height);
    ctx.restore();

    requestAnimationFrame(loop);
}

// Jump event
window.addEventListener("keydown", (e)=>{
    if(e.code === "Space"){
        if(running) bird.vy = jumpPower;
        else reset();
    }
});

c.addEventListener("click", ()=>{
    if(running) bird.vy = jumpPower;
    else reset();
});


// Start
reset();
loop();
</script>

</body>
</html>
